# Picture Depiction App

## مرور کلی

تصویرنگار یک برنامه مبتنی بر وب است که با React.js و Tailwind CSS ساخته شده و به کاربران اجازه می‌دهد تا تصاویر ساده‌ای
با استفاده از اشکال هندسی (دایره، مربع و مثلث) ایجاد و دستکاری کنند. این برنامه شامل عنوان قابل ویرایش، بومی برای قرار
دادن و ویرایش اشکال، نوار کناری برای انتخاب ابزارها، قابلیت وارد کردن/خروجی گرفتن فایل‌های JSON، و بخشی پایینی برای
نمایش تعداد اشکال است. پروژه با اجزای جداگانه طراحی شده تا ماژولاریته و قابلیت نگهداری آن افزایش یابد. ویژگی‌های جدید
شامل قابلیت کشیدن و رها کردن (drag-and-drop) اشکال از نوار کناری به بوم و امکان قرار دادن اشکال با کلیک پس از انتخاب
آن‌ها است.

## ویژگی‌ها

- **سربرگ**: حاوی عنوانی قابل ویرایش (به طور پیش‌فرض "عنوان نقاشی")، دکمه Export برای ذخیره بوم به صورت فایل JSON و دکمه
  Import برای بارگذاری فایل JSON قبلی.
- **بوم**: بخش اصلی که اشکال با انتخاب از نوار کناری و کلیک یا کشیدن و رها کردن روی آن قرار می‌گیرند. اشکال با دوبار
  کلیک حذف می‌شوند.
- **نوار کناری**: در سمت راست قرار دارد، برچسب "ابزارها" دارد و شامل اشکال قابل انتخاب (دایره، مربع، مثلث) است که کل
  ارتفاع پنجره را در بر می‌گیرد. اشکال می‌توانند با کشیدن و رها کردن به بوم منتقل شوند.
- **پایین صفحه**: در پایین سمت چپ قرار دارد و تعداد هر نوع شکل را با آیکون‌های رنگی (دایره قرمز، مربع آبی، مثلث سبز)
  نمایش می‌دهد.
- **وارد کردن/خروجی گرفتن**: Export داده‌های عنوان، اشکال (نوع، موقعیت، اندازه) و زمان‌برچسب را به صورت فایل JSON ذخیره
  می‌کند. Import حالت بوم را از فایل JSON معتبر بازیابی می‌کند.
- **کشیدن و رها کردن**: اشکال را می‌توان از نوار کناری کشیده و روی بوم رها کرد تا در محل رها شدن ظاهر شوند.
- **کلیک و قرار دادن**: با کلیک روی یک شکل در نوار کناری و سپس کلیک روی بوم، شکل در محل کلیک قرار می‌گیرد.

## فناوری‌های استفاده‌شده

- **React.js**: برای ساخت رابط کاربری و مدیریت حالت با معماری مبتنی بر کامپوننت.
- **Tailwind CSS**: برای استایل‌دهی با کلاس‌های کاربردی در اولویت.
- **SVG**: برای رندر اشکال روی بوم با موقعیت‌یابی دقیق و تعامل.
- **JavaScript**: برای مدیریت عملکرد وارد کردن/خروجی گرفتن، تعاملات بوم و قابلیت کشیدن و رها کردن.
- **وابستگی‌های CDN**: React، ReactDOM، Babel و Tailwind CSS از طریق CDN بارگذاری می‌شوند.

## ساختار پروژه

- `public/`: شامل فایل `index.html` است که به عنوان نقطه ورود با وابستگی‌های CDN عمل می‌کند.
- `src/`:
    - `App.js`: کامپوننت اصلی که حالت و چیدمان را مدیریت می‌کند، از جمله منطق کشیدن و رها کردن و کلیک.
    - `Header.js`: کامپوننت سربرگ با عنوان و دکمه‌ها.
    - `Canvas.js`: کامپوننت بوم که اشکال را رندر کرده و رویدادهای کلیک و رها کردن را مدیریت می‌کند.
    - `Sidebar.js`: کامپوننت نوار کناری که ابزارها را ارائه می‌دهد و قابلیت کشیدن را فعال می‌کند.
    - `Footer.js`: کامپوننت پایینی با تعداد اشکال.
    - `index.js`: نقطه ورود برای رندر کامپوننت App.
- `package.json`: متادیتای پروژه و اسکریپت برای اجرای محلی را تعریف می‌کند.

## نحوه اجرا

1. فایل‌های پروژه را کلون یا دانلود کنید.
2. مطمئن شوید Node.js نصب شده است.
3. ترمینال را در دایرکتوری پروژه باز کرده و `npm install` را اجرا کنید (هرچند از CDN استفاده می‌شود، `serve` توصیه
   می‌شود).
4. `npm start` را اجرا کنید تا برنامه به‌صورت محلی سرو شود (نیاز به نصب جهانی `serve` با `npm install -g serve` دارد).
5. مرورگر را باز کرده و به `http://localhost:3000` بروید.
6. به طور جایگزین، `public/index.html` را مستقیماً در مرورگر باز کنید برای تست سریع.

## نحوه استفاده

1. **ویرایش عنوان**: روی عنوان در سربرگ کلیک کنید تا نام تصویر را تغییر دهید.
2. **اضافه کردن اشکال با کلیک**: روی یک شکل (دایره، مربع یا مثلث) در نوار کناری کلیک کنید تا انتخاب شود، سپس روی بوم
   کلیک کنید تا در محل کلیک قرار گیرد.
3. **اضافه کردن اشکال با کشیدن و رها کردن**: یک شکل را از نوار کناری بکشید و روی بوم رها کنید تا در محل رها شدن ظاهر
   شود.
4. **حذف اشکال**: با دوبار کلیک روی شکل در بوم، آن را حذف کنید.
5. **خروجی گرفتن تصویر**: دکمه "Export" را کلیک کنید تا فایل JSON با داده‌های بوم فعلی دانلود شود.
6. **وارد کردن تصویر**: دکمه "Import" را کلیک کنید، فایل JSON را انتخاب کنید و بوم با داده‌های وارد شده به‌روزرسانی
   می‌شود.
7. **نمایش تعداد اشکال**: بخش پایینی تعداد هر نوع شکل را با آیکون‌ها نشان می‌دهد.

## توضیحات فایل‌ها

- **App.js**: مدیریت حالت اصلی شامل عنوان، اشکال و شکل انتخاب‌شده. منطق کلیک و رها کردن در اینجا پیاده‌سازی شده است. به
  عنوان مثال، تابع `handleDrop` اشکال را با استفاده از مختصات رها شدن اضافه می‌کند:
  ```javascript
  const handleDrop = (e) => {
    e.preventDefault();
    const shapeType = e.dataTransfer.getData('text/plain');
    const svg = e.currentTarget;
    const rect = svg.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const newShape = {
      id: Date.now(),
      type: shapeType,
      x,
      y,
      size: 50,
    };
    setShapes([...shapes, newShape]);
  };
  ```
  تابع `handleCanvasClick` نیز برای قرار دادن شکل با کلیک طراحی شده است:
  ```javascript
  const handleCanvasClick = (e) => {
    if (!selectedShape) return;
    const canvas = canvasRef.current;
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const newShape = {
      id: Date.now(),
      type: selectedShape,
      x,
      y,
      size: 50,
    };
    setShapes([...shapes, newShape]);
    setSelectedShape(null);
  };
  ```

- **Canvas.js**: رندر اشکال روی بوم و مدیریت رویدادهای کلیک و رها کردن. رویداد کلیک روی المنت `main` قرار گرفته تا از
  تداخل SVG جلوگیری شود:
  ```javascript
  <main
    className="flex-1 bg-gray-100 relative border-r-2 border-gray-300 p-4"
    style={{ height: '70vh' }}
    onClick={handleCanvasClick}
  >
  ```
  رویداد رها کردن روی `svg` برای دقت در موقعیت‌یابی تنظیم شده است.

- **Sidebar.js**: ارائه ابزارها و فعال‌سازی قابلیت کشیدن. هر شکل با `draggable="true"` و تابع `handleDragStart` مجهز شده
  است:
  ```javascript
  const handleDragStart = (e, shapeType) => {
    e.dataTransfer.setData('text/plain', shapeType);
    e.dataTransfer.effectAllowed = 'move';
  };
  ```

- **Header.js**: مدیریت عنوان و دکمه‌های وارد کردن و خروجی گرفتن.
- **Footer.js**: نمایش تعداد اشکال با آیکون‌ها.
- **index.js**: رندر کامپوننت App .

## نکات

- نوار کناری ثابت در سمت راست با ارتفاع کامل پنجره و مرز جداکننده از بوم است.
- بوم و بخش پایینی در سمت چپ با مرزها و فاصله‌گذاری هستند.
- برنامه از وابستگی‌های CDN استفاده می‌کند که آن را سبک و سازگار با مرورگر می‌کند.
- اندازه بوم و نوار کناری با درصد (vh) نسبت به پنجره تنظیم می‌شود.

## محدودیت‌ها

- پشتیبانی از تغییر اندازه یا چرخش اشکال وجود ندارد.
- عملکرد لغو/بازگشت وجود ندارد.
- بوم از اسکرول یا زوم پشتیبانی نمی‌کند.
- فقط فایل‌های JSON صادرشده توسط این برنامه به‌درستی وارد می‌شوند.

## مجوز

این پروژه برای اهداف آموزشی است و برای استفاده تجاری مجوز داده نشده است.

## استفاده از هوش مصنوعی برای طراحی CSS

طراحی CSS این پروژه با کمک هوش مصنوعی Grok 3 که توسط xAI توسعه یافته، بهبود یافته است. هوش مصنوعی برای تحلیل تصویر
شماتیک ارائه‌شده و پیشنهاد کلاس‌های Tailwind CSS که با چیدمان و فاصله‌گذاری موردنظر هم‌راستا هستند، به کار گرفته شد.
به‌طور خاص، هوش مصنوعی به تعیین موقعیت مناسب (مثلاً نوار کناری در سمت راست با ارتفاع کامل، بوم و بخش پایینی در سمت چپ با
مرزها) و فاصله‌گذاری (مثلاً padding و borders) کمک کرد. این شامل توصیه کلاس‌هایی مانند `h-screen`، `border-r-2`،
`border-l-2`، `border-t-2` و `p-4` بود.

